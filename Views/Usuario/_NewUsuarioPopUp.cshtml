@* @model NewUsuarioViewModel
 *@

@model SKL.Models.Usuario

@{

}


<div class="modal-header">
    <h5 class="modal-title" id="">@ViewData["Title"]</h5>
    <button type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"></button>
</div>
<form id="form1" asp-controller="Usuario" asp-action="Insert" role="form" method="post">
    <input type="hidden" asp-for="IdUser" />
    <div class="modal-body">
        <div class="row"> 
            <div class="col mb-3">
                <label asp-for="Name" class="form-label">Name</label>
                <input asp-for="Name" class="form-control" type="text" />
            </div>
        </div>
        <div class="row g-2">
            <div class="col mb-0">
                <label asp-for="UserName" class="form-label">UserName</label>
                <input asp-for="UserName" class="form-control" type="text" />
            </div>
            <div class="col mb-0">
                <label asp-for="UserPassword" class="form-label">Password</label>
                <input asp-for="UserPassword" class="form-control" type="text" />
            </div>
        </div>
        <div class="row g-2">
            <div class="col mb-0">
                <label asp-for="IdRole" class="form-label">Roles</label>
                <select asp-for="IdRole" class="form-control">
                    @foreach (var role in ViewBag.UserTypes)
                    {
                        <option value="@role.Id">@role.Name</option>
                    }
                </select>
            </div>
            <div class="col mb-0">
                <label asp-for="IdDepartment" class="form-label">Departamento</label>
                <select asp-for="IdDepartment" class="form-control">
                    @foreach (var dep in ViewBag.Departamentos)
                    {
                        <option value="@dep.Id">@dep.Name</option>
                    }
                </select>
            </div>
        </div>
        <div class="row g-2">
            <div class="col mb-0">
                <label asp-for="IdShift" class="form-label">Turno</label>
                <select asp-for="IdShift" class="form-control">
                    @foreach (var shi in ViewBag.Shifts)
                    {
                        <option value="@shi.Id">@shi.Name</option>
                    }
                </select>
            </div>
            <div class="col mb-0">
                <label asp-for="IdPosition" class="form-label">Posicion</label>
                <select asp-for="IdPosition" class="form-control">
                    @foreach (var pos in ViewBag.Positions)
                    {
                        <option value="@pos.Id">@pos.Name</option>
                    }
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col mb-3">
                <label asp-for="EmpNo" class="form-label">Numero de Empleado</label>
                <input asp-for="EmpNo" class="form-control" type="text" />
            </div>
        </div>
        <div class="row">
            <div class="col mb-3">
                <label asp-for="UserImage" class="form-label">Multiple files input example</label>
                <input class="form-control" type="file" asp-for="UserImage" multiple />
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button  type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            Close
        </button>
        <button type="submit" id="submit" class="btn btn-primary">Save changes</button>
    </div>
</form>


<script>
    $(function () {
        var formProvider = $('#form1');
        formProvider.submit(function (e) {
            console.log(e);
            e.preventDefault();
            formProvider.validate();
            console.log(formProvider.valid());
            if (formProvider.valid()) {
                var form = $(this);
                $.post(form.attr('action'), form.serialize(), function (res) {
                    if (res.status === 'success') {
                        // Show message
                        swal("Usuario", res.message, "success");
                        //swal.success(res.message);
                        // Hide window
                        $('#ModalWindow').modal("hide");
                    } else if (res.status === 'error') {
                        swal("Usuario", res.message, "error");
                    }
                });
            }
        });
    });
</script>